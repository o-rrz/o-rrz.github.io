/* =====================================================
   utils.js ｜ 防詐保險箱 / 防炸工具集
   功能目標：
   1. 元素不存在時，不執行、不報錯
   2. 所有共用 JS 工具集中管理
   3. 讓「加功能」≠「整站爆炸」
===================================================== */

/* =====================================================
   1️⃣ 安全選取單一元素
   - 傳入 CSS selector
   - 找不到時回傳 null
===================================================== */
function $(selector) {
  return document.querySelector(selector);
}

/* =====================================================
   2️⃣ 安全選取多個元素
   - 一定回傳陣列（就算是空的）
===================================================== */
function $all(selector) {
  return Array.from(document.querySelectorAll(selector));
}

/* =====================================================
   3️⃣ 安全事件綁定
   - 元素不存在時，自動略過
   - 防止 addEventListener 爆錯
===================================================== */
function on(element, event, handler) {
  if (!element) return;
  element.addEventListener(event, handler);
}

/* =====================================================
   4️⃣ DOM 存在才執行
   - 常用在「某頁才有的功能」
   - callback 只有在元素存在時才跑
===================================================== */
function whenExist(selector, callback) {
  const el = $(selector);
  if (el) {
    callback(el);
  }
}

/* =====================================================
   5️⃣ 安全 Console Log
   - debug = false 時，不輸出任何 log
   - 上線前可一鍵關閉
===================================================== */
const DEBUG = true;

function log(...args) {
  if (DEBUG) {
    console.log('[Mobispace]', ...args);
  }
}

/* =====================================================
   6️⃣ 頁面判斷工具
   - 用 body 的 data-page 判斷目前頁面
   - 避免用 URL 字串硬判斷
===================================================== */
function isPage(pageName) {
  return document.body.dataset.page === pageName;
}

/* =====================================================
   utils.js 結尾說明：
   - 這裡不寫「實際功能」
   - 只放「防炸、共用、保護型」工具
===================================================== */